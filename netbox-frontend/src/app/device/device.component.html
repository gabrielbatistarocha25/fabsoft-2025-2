<div class="container mt-4">
  <h2>Dispositivos</h2>
  <button class="btn btn-primary mb-3" (click)="novo()">Novo Dispositivo</button>
  <table class="table table-striped table-hover">
    <thead> 
      <tr> 
        <th>ID</th> 
        <th>Nome</th> 
        <th>Site (Localização)</th> 
        <th>Rack (Site)</th> 
        <th>Pos (U)</th> 
        <th>Modelo (Fabricante)</th> 
        <th>Ações</th> 
      </tr> 
    </thead>
    <tbody>
      <tr *ngFor="let item of lista">
        <td>{{ item.id }}</td>
        <td>{{ item.name }}</td>
        <td>
          {{ item.site?.name || 'N/A' }}
          <span *ngIf="item.site?.location" class="text-muted">
            ({{ item.site?.location?.name }})
          </span>
        </td> 
        <td>
          {{ item.rack?.name || 'N/A' }}
          <span *ngIf="item.rack?.site" class="text-muted">
             ({{ item.rack?.site?.name }})
          </span>
        </td> 
        <td>{{ item.position || '-' }}</td> 
        <td>
          {{ item.deviceModel?.name || 'N/A' }}
          <span *ngIf="item.deviceModel?.manufacturer" class="text-muted">
             ({{ item.deviceModel?.manufacturer?.name }})
          </span>
        </td> 
        <td>
          <button (click)="alterar(item)" class="btn btn-sm btn-warning me-2">Alterar</button>
          <button (click)="abrirConfirmacao(item)" class="btn btn-sm btn-danger">Excluir</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="modal fade" #deleteModal tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header"> <h5 class="modal-title">Excluir Dispositivo</h5> </div>
      <div class="modal-body"> Confirma a exclusão de <strong>{{ selecionado?.name }}</strong>? </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="fecharConfirmacao()">Cancelar</button>
        <button type="button" class="btn btn-danger" (click)="confirmarExclusao()">Excluir</button>
      </div>
    </div>
  </div>
</div>